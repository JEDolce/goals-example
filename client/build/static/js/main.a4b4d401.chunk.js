(this["webpackJsonpgoal-generator"]=this["webpackJsonpgoal-generator"]||[]).push([[0],{77:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(18),c=r.n(s),o=r(13),i=r(2),u=r(15),l=(r(46),r(14)),d=r(5),j=r(3),b=r.n(j),p=r(9),f=r(11),g=r(16),m=r.n(g),h="/api/users/",O=function(){var e=Object(p.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(h,t);case 2:return(r=e.sent).data&&localStorage.setItem("user",JSON.stringify(r.data)),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(h+"login",t);case 2:return(r=e.sent).data&&localStorage.setItem("user",JSON.stringify(r.data)),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("user");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w={register:O,logout:v,login:x},S=JSON.parse(localStorage.getItem("user")),y={user:S||null,isError:!1,isSuccess:!1,isLoading:!1,message:""},N=Object(f.b)("auth/register",function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.register(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),a=e.t0.message&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(a));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),C=Object(f.b)("auth/login",function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.login(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),a=e.t0.message&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(a));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),L=Object(f.b)("auth/logout",Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.logout();case 2:case"end":return e.stop()}}),e)})))),k=Object(f.c)({name:"auth",initialState:y,reducers:{reset:function(e){e.isError=!1,e.isSuccess=!1,e.isLoading=!1,e.message=""}},extraReducers:function(e){e.addCase(N.pending,(function(e){e.isLoading=!0})).addCase(N.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.user=t.payload})).addCase(N.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload,e.user=null})).addCase(C.pending,(function(e){e.isLoading=!0})).addCase(C.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.user=t.payload})).addCase(C.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload,e.user=null})).addCase(L.fulfilled,(function(e){e.user=null}))}}),E=k.actions.reset,G=k.reducer,F=r(1);function W(){var e=Object(i.f)(),t=Object(d.b)(),r=Object(d.c)((function(e){return e.auth})).user;return Object(F.jsxs)("div",{className:"header",children:[Object(F.jsx)("div",{className:"logo",children:Object(F.jsx)(o.b,{to:"/",children:"GoalSetter"})}),Object(F.jsx)("ul",{children:r?Object(F.jsx)("li",{children:Object(F.jsxs)("button",{className:"btn",onClick:function(){t(L()),t(E()),e("/")},children:[Object(F.jsx)(l.b,{})," Logout"]})}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("li",{children:Object(F.jsxs)(o.b,{to:"/login",children:[Object(F.jsx)(l.a,{})," Login"]})}),Object(F.jsx)("li",{children:Object(F.jsxs)(o.b,{to:"/register",children:[Object(F.jsx)(l.c,{})," Register"]})})]})})]})}var A=r(8),D="/api/goals/",I=function(){var e=Object(p.a)(b.a.mark((function e(t){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"Bearer ".concat(t)}},e.next=3,m.a.get(D,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(r)}},e.next=3,m.a.post(D,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),V=function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(r)}},e.next=3,m.a.delete(D+t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),B={getGoals:I,createGoal:J,deleteGoal:V},R={goals:[],isError:!1,isSuccess:!1,isLoading:!1,message:""},z=Object(f.b)("goals/getUserGoals",function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=r.getState().auth.user.token,e.next=4,B.getGoals(a);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),n=e.t0.message&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(n));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),_=Object(f.b)("goals/create",function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=r.getState().auth.user.token,console.log(a),e.next=5,B.createGoal(t,a);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(0),n=e.t0.message&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(n));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),P=Object(f.b)("goals/delete",function(){var e=Object(p.a)(b.a.mark((function e(t,r){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=r.getState().auth.user.token,e.next=4,B.deleteGoal(t,a);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),n=e.t0.message&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(n));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),U=Object(f.c)({name:"goal",initialState:R,reducers:{reset:function(e){return R}},extraReducers:function(e){e.addCase(_.pending,(function(e){e.isLoading=!0})).addCase(_.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.goals.push(t.payload)})).addCase(_.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload})).addCase(z.pending,(function(e){e.isLoading=!0})).addCase(z.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.goals=t.payload})).addCase(z.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload})).addCase(P.pending,(function(e){e.isLoading=!0})).addCase(P.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.goals=e.goals.filter((function(e){return e._id!==t.payload.id}))})).addCase(P.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload}))}}),M=U.actions.reset,X=U.reducer;function Y(){var e=Object(a.useState)(""),t=Object(A.a)(e,2),r=t[0],n=t[1],s=Object(d.b)();return Object(F.jsx)("section",{children:Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(_({text:r})),n("")},children:[Object(F.jsxs)("div",{className:"form-group",children:[Object(F.jsx)("label",{htmlFor:"text",children:"Goal"}),Object(F.jsx)("input",{type:"text",id:"text",name:"text",value:r,onChange:function(e){return n(e.target.value)}})]}),Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("button",{className:"btn btn-block",children:"Add Goal"})})]})})}function q(){return Object(F.jsx)("div",{className:"loadingSpinnerContainer",children:Object(F.jsx)("div",{className:"loadingSpinner"})})}function H(e){var t=e.goal,r=Object(d.b)();return Object(F.jsxs)("div",{className:"goal",children:[Object(F.jsx)("div",{children:new Date(t.createdAt).toLocaleString("en-US")}),Object(F.jsx)("h2",{children:t.text}),Object(F.jsx)("button",{className:"close",onClick:function(){return r(P(t._id))},children:"X"})]})}function K(){var e=Object(i.f)(),t=Object(d.b)(),r=Object(d.c)((function(e){return e.auth})).user,n=Object(d.c)((function(e){return e.goals})),s=n.goals,c=n.isLoading,o=n.isError,u=n.message;return Object(a.useEffect)((function(){return o&&console.log(u),r||e("/login"),t(z()),function(){t(M())}}),[r,e,o,u,t]),c?Object(F.jsx)(q,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("section",{className:"heading",children:[Object(F.jsxs)("h1",{children:["Welcome ",r&&r.name]}),Object(F.jsx)("p",{children:"Goals Dashboard"})]}),Object(F.jsx)(Y,{}),Object(F.jsx)("section",{className:"content",children:s.length>0?Object(F.jsx)("div",{children:s.map((function(e){return Object(F.jsx)(H,{goal:e},e._id)}))}):Object(F.jsx)("h3",{children:"You have no goals in life"})})]})}var Q=r(20),T=r(21);function Z(){var e=Object(a.useState)({name:"",email:"",password:"",password2:""}),t=Object(A.a)(e,2),r=t[0],n=t[1],s=r.name,c=r.email,o=r.password,j=r.password2,b=Object(i.f)(),p=Object(d.b)(),f=Object(d.c)((function(e){return e.auth})),g=f.user,m=f.isLoading,h=f.isError,O=f.isSuccess,x=f.message;Object(a.useEffect)((function(){h&&u.b.error("Error"),(O||g)&&b("/"),p(E())}),[h,O,g,x,b,p]);var v=function(e){n((function(t){return Object(T.a)(Object(T.a)({},t),{},Object(Q.a)({},e.target.name,e.target.value))}))};return m?Object(F.jsx)(q,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("section",{className:"heading",children:[Object(F.jsxs)("h1",{children:[Object(F.jsx)(l.c,{})," Register"]}),Object(F.jsx)("p",{children:"Please create an account"})]}),Object(F.jsx)("section",{className:"form",children:Object(F.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),o!==j)?u.b.error("Passwords do not match"):p(N({name:s,email:c,password:o}))},children:[Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:s,placeholder:"Enter your name",onChange:v})}),Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:c,placeholder:"Enter your email",onChange:v})}),Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",value:o,placeholder:"Enter password",onChange:v})}),Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("input",{type:"password",className:"form-control",id:"password2",name:"password2",value:j,placeholder:"Confirm password",onChange:v})}),Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("button",{type:"submit",className:"btn btn-block",children:"Submit"})})]})})]})}function $(){var e=Object(a.useState)({email:"",password:""}),t=Object(A.a)(e,2),r=t[0],n=t[1],s=r.email,c=r.password,o=Object(i.f)(),j=Object(d.b)(),b=Object(d.c)((function(e){return e.auth})),p=b.user,f=b.isLoading,g=b.isError,m=b.isSuccess,h=b.message;Object(a.useEffect)((function(){g&&u.b.error("Error"),(m||p)&&o("/"),j(E())}),[g,m,p,h,o,j]);var O=function(e){n((function(t){return Object(T.a)(Object(T.a)({},t),{},Object(Q.a)({},e.target.name,e.target.value))}))};return f?Object(F.jsx)(q,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("section",{className:"heading",children:[Object(F.jsxs)("h1",{children:[Object(F.jsx)(l.a,{})," Login"]}),Object(F.jsx)("p",{children:"Login and start setting goals"})]}),Object(F.jsx)("section",{className:"form",children:Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(C({email:s,password:c}))},children:[Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:s,placeholder:"Enter your email",onChange:O})}),Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",value:c,placeholder:"Enter password",onChange:O})}),Object(F.jsx)("div",{className:"form-group",children:Object(F.jsx)("button",{type:"submit",className:"btn btn-block",children:"Submit"})})]})})]})}var ee=function(){return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(o.a,{children:Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)(W,{}),Object(F.jsxs)(i.c,{children:[Object(F.jsx)(i.a,{path:"/",element:Object(F.jsx)(K,{})}),Object(F.jsx)(i.a,{path:"/register",element:Object(F.jsx)(Z,{})}),Object(F.jsx)(i.a,{path:"/login",element:Object(F.jsx)($,{})})]}),Object(F.jsx)(u.a,{})]})})})},te=(r(77),Object(f.a)({reducer:{auth:G,goals:X}}));c.a.render(Object(F.jsx)(n.a.StrictMode,{children:Object(F.jsx)(d.a,{store:te,children:Object(F.jsx)(ee,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.a4b4d401.chunk.js.map